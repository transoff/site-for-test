<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MeroAI Code Repository</title>
    <meta name="color-scheme" content="light dark" />
    <!-- Ранняя инициализация темы до загрузки стилей, чтобы минимизировать FOUC -->
    <script>
      (function () {
        try {
          var saved = localStorage.getItem('theme');
          var theme = (saved === 'light' || saved === 'dark') ? saved : 'dark'; // по умолчанию тёмная
          document.documentElement.setAttribute('data-theme', theme);
        } catch (e) {
          // Если localStorage недоступен (например, приватный режим строгий) — по умолчанию тёмная
          document.documentElement.setAttribute('data-theme', 'dark');
        }
      })();
    </script>
    <style>
      /*
        Тема реализована через CSS-переменные. Переключение — атрибут data-theme на <html>.
        Темы:
          - dark: фон #0f1419, текст #fff, акцент #1e88e5, границы спокойные серые.
          - light: фон #f5f5f5, текст #333, акцент #1e88e5, границы чёрные.
      */
      :root {
        --bg: #0f1419;
        --text: #ffffff;
        --accent: #1e88e5;
        --border: #2a2f36; /* приглушённая граница для тёмной темы */
      }
      html[data-theme='light'] {
        --bg: #f5f5f5;
        --text: #333333;
        --accent: #1e88e5;
        --border: #000000; /* требование: чёрные границы в светлой теме */
      }

      /* Базовые стили */
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif;
        background: var(--bg);
        color: var(--text);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      a { color: var(--accent); text-decoration: none; }
      a:hover { text-decoration: underline; }

      .container {
        max-width: 1100px;
        margin: 0 auto;
        padding: 0 16px;
      }

      /* Шапка сайта */
      .site-header {
        position: sticky;
        top: 0;
        z-index: 10;
        background: var(--bg);
        border-bottom: 1px solid var(--border);
      }
      .site-header__inner {
        display: flex;
        align-items: center;
        justify-content: space-between;
        height: 56px;
      }
      .brand {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        font-weight: 600;
        letter-spacing: 0.2px;
      }
      .brand__dot {
        width: 10px; height: 10px; border-radius: 50%; background: var(--accent);
      }

      /* Кнопка переключения темы */
      .theme-toggle {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        height: 36px;
        padding: 0 12px;
        border-radius: 8px;
        border: 1px solid var(--border);
        background: transparent;
        color: var(--text);
        cursor: pointer;
        transition: border-color 0.15s ease, background-color 0.15s ease;
      }
      .theme-toggle:hover { border-color: var(--accent); }
      .theme-toggle:focus { outline: 2px solid var(--accent); outline-offset: 2px; }
      .theme-toggle__label { font-size: 14px; }

      .icon { width: 18px; height: 18px; display: inline-block; }
      /* Показываем иконку в зависимости от темы */
      html[data-theme='dark'] .icon--moon { display: inline-block; }
      html[data-theme='dark'] .icon--sun { display: none; }
      html[data-theme='light'] .icon--moon { display: none; }
      html[data-theme='light'] .icon--sun { display: inline-block; }

      /* Демоконтент (необязательный, для наглядности) */
      .content { padding: 24px 0 56px; }
      .card {
        border: 1px solid var(--border);
        border-radius: 10px;
        padding: 16px;
      }
      .row { display: flex; gap: 16px; flex-wrap: wrap; }
      .row .card { flex: 1 1 320px; }
      code { padding: 0 4px; border: 1px solid var(--border); border-radius: 4px; }
    </style>
  </head>
  <body>
    <header class="site-header">
      <div class="container site-header__inner">
        <div class="brand">
          <span class="brand__dot" aria-hidden="true"></span>
          <span>MeroAI Code Repository</span>
        </div>
        <button id="theme-toggle" class="theme-toggle" type="button" aria-pressed="false" aria-label="Переключить тему" title="Переключить тему">
          <!-- Луна (для тёмной темы показываем её) -->
          <svg class="icon icon--moon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z"/>
          </svg>
          <!-- Солнце (для светлой темы показываем его) -->
          <svg class="icon icon--sun" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.8 1.42-1.42zM1 13h3v-2H1v2zm10 10h2v-3h-2v3zm9-10v2h3v-2h-3zm-3.95 7.16l1.41 1.41 1.8-1.79-1.41-1.41-1.8 1.79zM13 1h-2v3h2V1zM4.22 18.36l1.8 1.79 1.41-1.41-1.79-1.8-1.42 1.42zM12 6a6 6 0 100 12 6 6 0 000-12z"/>
          </svg>
          <span class="theme-toggle__label">Тема</span>
        </button>
      </div>
    </header>

    <main class="container content">
      <h1>Добро пожаловать</h1>
      <p>Этот сайт поддерживает тёмную и светлую тему. Используйте переключатель в шапке.</p>
      <div class="row">
        <div class="card">
          <h3>Акцентные элементы</h3>
          <p><a href="#">Ссылка с акцентным цветом</a> и <code>границы</code> используют цвета темы.</p>
        </div>
        <div class="card">
          <h3>Сохранение выбора</h3>
          <p>Выбранная тема сохраняется в <code>localStorage</code> и будет загружена при следующем посещении.</p>
        </div>
      </div>
    </main>

    <script>
      (function () {
        // Ключ localStorage, где хранится тема
        var KEY = 'theme';

        // Установка темы: обновляет HTML-атрибут и сохраняет в localStorage
        function setTheme(theme) {
          var t = (theme === 'light') ? 'light' : 'dark';
          document.documentElement.setAttribute('data-theme', t);
          try { localStorage.setItem(KEY, t); } catch (e) { /* игнорируем ошибки хранения */ }
          updateButton(t);
        }

        // Обновляем состояние кнопки: иконка управляется CSS, но подписи/ARIA обновляем тут
        function updateButton(currentTheme) {
          var btn = document.getElementById('theme-toggle');
          if (!btn) return;
          var next = currentTheme === 'dark' ? 'light' : 'dark';
          var label = 'Переключить на ' + (next === 'light' ? 'светлую' : 'тёмную') + ' тему';
          btn.setAttribute('aria-label', label);
          btn.title = label;
          // aria-pressed=true будем трактовать как "светлая тема активна"
          btn.setAttribute('aria-pressed', String(currentTheme === 'light'));
        }

        // Инициализация кнопки и обработчика
        document.addEventListener('DOMContentLoaded', function () {
          var btn = document.getElementById('theme-toggle');
          if (!btn) return;
          var current = document.documentElement.getAttribute('data-theme') || 'dark';
          updateButton(current);
          btn.addEventListener('click', function () {
            var theme = document.documentElement.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
            setTheme(theme);
          });
        });
      })();
    </script>
  </body>
</html>
